{% extends 'base.html' %}
{% load static %}
{% load rest_framework %}
{% block title %} Customer Billing Address {{ block.super }}{% endblock %}
{% block content %}
<div class="container-fluid my-3 py-3">
  <div class="row mt-4">
    {% include 'customer_management/customer_actions.html' %}
    <div class="col-lg-9 mt-lg-0">
      {% include 'components/alert.html' %}
      {% include 'customer_management/customer_info.html' %}
        <!-- Card Basic Info -->
        <div class="card" id="basic-info">
            <div class="card-header">
              <h5>Billing Address </h5>
            </div>
            <div class="card-body pt-0">
                <form role="form"  method="POST" autocomplete="off" >
                    <div class='row'>
                        {% csrf_token %}
                        {% render_form serializer %}
                    </div>
                    <button class="btn bg-gradient-dark btn-sm float-end mt-4 mb-0">Save</button>

                </form>
            </div>
        </div>
        <div class="card mt-4" id="basic-info">
            <table class="table table-flush text-dark " id="billing-address-list">
                <thead class="thead-light">
                    <tr>
                        <th>VAT</th>
                        <th>NION</th>
                        <th>Tax</th>
                        <th>Place To Supply</th>
                        <th>Address</th>
                        <th class="custom-last-column">Actions</th>
                    </tr>
                </thead>
                <tbody >
                    {% for billing_address in billing_address_list %}
                    <tr>
                      <td>{{ billing_address.vat_number|default:'' }}</td>
                      <td>{{ billing_address.pan_number|default:'' }}</td>
                      <td>{{ billing_address.get_tax_preference_display|default:'' }}</td>
                      <td>{{ billing_address.place_to_supply|default:''|truncatechars:20 }}</td>
                      <td >
                        {{ billing_address.address|default:''|truncatechars:20 }}<br>
                        {% if billing_address.town %}{{ billing_address.town.name }} <br>{% endif %}
                        {% if billing_address.county %}{{ billing_address.county.name}}<br>{% endif %}
                        {{ billing_address.country|default:'' }}<br>
                        {{ billing_address.post_code|default:'' }}
                    </td>
                        <td> 
                            <a href="{% url 'customer_billing_address_edit' customer_instance.id billing_address.id %}" data-bs-toggle="tooltip" data-bs-original-title="Edit Contact">
                                <i class="fas fa-edit text-secondary"></i>
                            </a>
                            <a href="#" type="button" class="mx-3" data-bs-toggle="tooltip" data-bs-original-title="Delete Contact" 
                            onclick="CustomconfirmDelete({{customer_instance.id}}{{billing_address.id}}, 'Are you sure you want to delete this billing address??','The billing address has been deleted successfully.','{% url 'customer_billing_address_delete' customer_instance.id billing_address.id %}')">
                                <i class="fas fa-trash text-secondary"></i>

                            </a>
                        </td>
                    </tr>
                    
                    {% endfor %}
                </tbody>
            </table>
            </div>
       

        
    
    </div>
  </div>
</div>

{% endblock %}
{% block extra_js %}
<script src="{% static 'assets/js/plugins/choices.min.js' %}"></script>
<script src="{% static 'assets/js/custom_country.js' %}"></script>
<script src="{% static 'assets/js/plugins/datatables.js' %}"></script>
<script src="{% static 'assets/js/plugins/sweetalert.min.js' %}"></script>
<script src="{% static 'assets/js/custom_delete.js' %}"></script>
<script>
  if (document.getElementById('billing-address-list')) {
    const dataTableSearch = new simpleDatatables.DataTable("#billing-address-list", {
      searchable: true,
      fixedHeight: false,
      perPage: 10
    });

  };
</script>
{% endblock %}