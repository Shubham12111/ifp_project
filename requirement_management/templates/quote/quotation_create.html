{% extends 'base.html' %}
{% load static %}
{% block extra_css %}
<link id="pagestyle" href="{% static '/assets/css/slider.css' %}" rel="stylesheet" />
<style>
    .table td {
        white-space: normal; /* Use 'normal' to allow text wrapping */
    }
     /* Style for table borders */
     .table-bordered tr:not(:last-child) {
        border: 1px solid #000; /* Change the color and width as needed */
    }

    .table-bordered td {
        border: 1px solid #000; /* Change the color and width as needed */
    }
</style>
{% endblock %}
{% load rest_framework %}
{% block title %}FRA Reports {{ block.super }}{% endblock %}
{% block content %}
{% load custom_tags %}
{% include 'components/alert.html' %}


<div class="container-fluid my-3 py-3">
  <div class="row align-items-center mb-2">
      <div class="col-lg-12 col-sm-8">
          <!-- ... (existing code) ... -->
      </div>
  </div>

  <!-- Client Details Section -->
  <div class="card">
      <div class="card-header pb-0">
          <h5>Client Details</h5>
      </div>
      <div class="card-body">
          <table class="table">
              <tbody>
                  <tr>
                      <td><strong>Client</strong></td>
                      <td>{{ customer_data.first_name|title }} {{ customer_data.last_name|title }}</td>
                  </tr>
                  <tr>
                      <td><strong>Client Address</strong></td>
                      <td>Client's Address</td>
                  </tr>
                  <tr>
                      <td><strong>Quote Submission Date</strong></td>
                      <td>199-01-01</td>
                  </tr>
                  <tr>
                      <td><strong>Quote Reference</strong></td>
                      <td>2023-851-V2</td>
                  </tr>
                  <tr>
                    <td><strong>Job Address</strong></td>
                    <td>{{ requirement_instance.site_address }}</td>
                </tr>
              </tbody>
          </table>
      </div>
  </div>

  <!-- Works Description and Defects Section -->
<div class="card mt-4 mx-0">
  <div class="card-header pb-0 mt-0">
      <h5 class="card-title">Works Description</h5>
  </div>
  <div class="card-body mt-0">
      <p class="text-sm mt-2" style="text-align: justify;">
          {{ requirement_instance.description }}
      </p>
  </div>
</div>

<div class="card mt-4 mx-0">
  <div class="card-header pb-0 mt-0">
    <h5 class="card-title">Defects</h5>
  </div>
  <div class="card-body mt-0">
    {% for defect in requiremnt_defect_instances %}
      <div class="defect-section">
        <h6>Defect {{ forloop.counter }}</h6>
        <p><strong>Action:</strong> {{ defect.action }}</p>
        <p><strong>Description:</strong> {{ defect.description }}</p>
        <p><strong>Reference Number:</strong> {{ defect.reference_number }}</p>
        <p><strong>Rectification Description:</strong> {{ defect.rectification_description }}</p>
        <button class="btn btn-primary add-sor-button" data-defect-id="{{ defect.id }}">Add SOR</button>
        <button class="btn btn-danger remove-defect-button" data-defect-id="{{ defect.id }}">Remove Defect</button>
        <div class="sor-table" id="sor-table-{{ defect.id }}" style="display: none;">
          <table class="table table-striped table-bordered text-sm">
            <thead>
              <tr>
                <th>SOR</th>
                <th>Data</th>
                <th>Action</th>
              </tr>
            </thead>
            <tbody>
              <!-- Display SOR data here for this defect -->
            </tbody>
          </table>
        </div>
      </div>
    {% endfor %}
  </div>
</div>




  <!-- Project Costs Section -->
  <div class="card mt-4 mx-0">
      <div class="card-header pb-0 mt-0">
          <h5 class="card-title">Project Costs</h5>
      </div>
      <div class="card-body mt-0">
          <!-- Add project cost details here -->
      </div>
  </div>

  <!-- Notes Section -->
  <div class="card mt-4 mx-0">
      <div class="card-header pb-0 mt-0">
          <h5 class="card-title">Notes</h5>
      </div>
      <div class="card-body mt-0">
          {{report_instance.comments}}
      </div>
  </div>

  <!-- ... (the rest of your existing code) ... -->
</div>  




{% endblock %}
{% block extra_js %}
<script src="{% static 'assets/js/plugins/sweetalert.min.js' %}"></script>
<script src="{% static 'assets/js/custom_delete.js' %}"></script>
<script src="{% static 'assets/js/plugins/datatables.js' %}"></script>


{% endblock %}